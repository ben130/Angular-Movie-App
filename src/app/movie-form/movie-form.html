<body>

  <!-- Navigation -->
  <header class="nav">
    <div class="logo">üçø</div>
    <nav>
      <a href="#search">Search</a>
      <a href="#top-rated">Top Rated</a>
      <a href="#discover">Discover</a>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero" id="search">
    <div class="container">
      <h1>FlickBase</h1>
      <p>Discover your next favorite film or series</p>
      <div class="input-group">
        <div class="search-container">
          <input id="name" type="text" [formControl]="name" placeholder="Search for movies or TV shows..." 
                 (keydown)="onKeyDown($event)">
          <button class="btn-clear" *ngIf="name.value" (click)="clearSearch()" title="Clear search">√ó</button>
        </div>
      </div>
      <button class="btn" (click)="search()">Search</button>
    </div>
  </section>

  <!-- Search Results -->
  <section class="section gray" *ngIf="searchResults && searchResults.length > 0">
    <div class="container">
      <h2>Search Results</h2>
      <p>{{ filteredResults.length }} result{{ filteredResults.length !== 1 ? 's' : '' }} found</p>
      
      <!-- Filters -->
      <div class="filters">
        <div class="filter-group">
          <label for="genre-filter">Genre:</label>
          <select id="genre-filter" [(ngModel)]="selectedGenre" (change)="onGenreChange()" class="filter-select">
            <option value="">All Genres</option>
            <option *ngFor="let genre of allGenres" [value]="genre">{{ genre }}</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="decade-filter">Decade:</label>
          <select id="decade-filter" [(ngModel)]="selectedDecade" (change)="onDecadeChange()" class="filter-select">
            <option value="">All Decades</option>
            <option *ngFor="let decade of getDecades()" [value]="decade">{{ decade }}s</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="sort-filter">Sort by:</label>
          <select id="sort-filter" [(ngModel)]="sortBy" (change)="onSortChange()" class="filter-select">
            <option value="title">Title (A-Z)</option>
            <option value="year">Year (Newest First)</option>
          </select>
        </div>
      </div>
      
      <div class="results">
        <div class="movie-card" *ngFor="let item of filteredResults">
          <img *ngIf="item.thumbnail" [src]="item.thumbnail" [alt]="item.title" class="movie-card-image" 
               onerror="this.style.display='none'">
          <div class="movie-card-content">
            <div class="movie-card-title">{{ item.title }}</div>
            <div class="movie-card-year">{{ item.year }}</div>
            <div class="movie-card-platform" *ngIf="item.genres && item.genres.length > 0">
              {{ item.genres.join(', ') }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- No Results Message -->
  <section class="section gray" *ngIf="name.value && searchResults.length === 0">
    <div class="container">
      <div class="empty-state">
        <div class="empty-state-icon">üîç</div>
        <div class="empty-state-text">No results found for "{{ name.value }}"</div>
        <button class="btn secondary" (click)="clearSearch()" style="margin-top: 20px;">Clear Search</button>
      </div>
    </div>
  </section>

  <!-- Top Rated Section -->
  <section class="section showcase" id="top-rated">
    <div class="container">
      <h2>Top Rated</h2>
      <p>Most watched across all streaming services</p>
      <div class="results" *ngIf="topRated && topRated.length > 0">
        <div class="movie-card" *ngFor="let item of topRated">
          <img *ngIf="item.thumbnail" [src]="item.thumbnail" [alt]="item.title" class="movie-card-image"
               onerror="this.style.display='none'">
          <div class="movie-card-content">
            <div class="movie-card-title">{{ item.title }}</div>
            <div class="movie-card-platform">{{ item.platform }}</div>
            <div class="movie-card-stats">
              {{ item.minutes_viewed_billions }}B minutes viewed
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Random Movie Section -->
  <section class="section gray" id="discover">
    <div class="container">
      <h2>Not sure what to watch?</h2>
      <p>Let us surprise you with a random pick</p>
      <button class="btn secondary" (click)="getRandomMovie()">Get Random Suggestion</button>
      <div class="random-movie-container" *ngIf="randomMovie">
        <div class="random-movie-card">
          <img *ngIf="randomMovie.thumbnail" [src]="randomMovie.thumbnail" [alt]="randomMovie.title" 
               class="random-movie-image" onerror="this.style.display='none'">
          <div class="random-movie-info">
            <div class="random-movie-title">{{ randomMovie.title }}</div>
            <div class="random-movie-year">{{ randomMovie.year }}</div>
            <div class="movie-card-platform" *ngIf="randomMovie.genres && randomMovie.genres.length > 0" 
                 style="margin-top: 12px;">
              {{ randomMovie.genres.join(' ‚Ä¢ ') }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>¬© 2025 Ben130 - Inspired by Apple Inc.</p>
    </div>
  </footer>

</body>
